<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <meta>
    <lastUpdated value="2016-03-31T16:19:45.621+02:00" />
  </meta>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="0" />
  </extension>
  <url value="http://sll-mdilab.net/fhir/StructureDefinition/vital-sign-based-medication-order" />
  <name value="MDI VitalSignBasedMedicationOrder" />
  <status value="draft" />
  <publisher value="SLL Medical Device Integration Lab" />
  <date value="2016-03-30T00:00:00+02:00" />
  <description value="Represents a medication order which depends on a specified vital sign." />
  <fhirVersion value="1.0.1" />
  <mapping>
    <identity value="rim" />
    <uri value="http://hl7.org/v3" />
    <name value="RIM" />
  </mapping>
  <mapping>
    <identity value="w5" />
    <uri value="http://hl7.org/fhir/w5" />
    <name value="W5 Mapping" />
  </mapping>
  <mapping>
    <identity value="v2" />
    <uri value="http://hl7.org/v2" />
    <name value="HL7 v2" />
  </mapping>
  <kind value="resource" />
  <constrainedType value="MedicationOrder" />
  <abstract value="false" />
  <base value="http://hl7.org/fhir/StructureDefinition/MedicationOrder" />
  <differential>
    <element>
      <path value="MedicationOrder" />
      <short value="Prescription of medication to for patient" />
      <definition value="An order for both supply of the medication and the instructions for administration of the medication to a patient. The resource is called &quot;MedicationOrder&quot; rather than &quot;MedicationPrescription&quot; to generalize the use across inpatient and outpatient settings as well as for care plans, etc." />
      <alias value="Prescription" />
      <min value="0" />
      <max value="*" />
      <base>
        <path value="MedicationOrder" />
        <min value="0" />
        <max value="*" />
      </base>
      <type>
        <code value="MedicationOrder" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="CombinedMedicationRequest" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="clinical.medication" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.identifier" />
      <short value="External identifier" />
      <definition value="External identifier - one that would be used by another non-FHIR system - for example a re-imbursement system might issue its own id for each prescription that is created.  This is particularly important where FHIR only provides part of an entire workflow process where records have to be tracked through an entire system." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.identifier" />
        <min value="0" />
        <max value="*" />
      </base>
      <type>
        <code value="Identifier" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="ORC-2-Placer Order Number / ORC-3-Filler Order Number" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="id" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="id" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dateWritten" />
      <short value="When prescription was authorized" />
      <definition value="The date (and perhaps time) when the prescription was written." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.dateWritten" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="dateTime" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-32-Original Order Date/Time / ORC-9-Date/Time of Transaction" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="author.time" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="when.recorded" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.status" />
      <short value="active | on-hold | completed | entered-in-error | stopped | draft" />
      <definition value="A code specifying the state of the order.  Generally this will be active or completed state." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.status" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="code" />
      </type>
      <isModifier value="true" />
      <isSummary value="true" />
      <binding>
        <strength value="required" />
        <description value="A code specifying the state of the prescribing event. Describes the lifecycle of the prescription." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/medication-order-status" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="statusCode" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="status" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dateEnded" />
      <short value="When prescription was stopped" />
      <definition value="The date (and perhaps time) when the prescription was stopped." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dateEnded" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="dateTime" />
      </type>
      <isSummary value="true" />
    </element>
    <element>
      <path value="MedicationOrder.reasonEnded" />
      <short value="Why prescription was stopped" />
      <definition value="The reason why the prescription was stopped, if it was." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.reasonEnded" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="Codes indicating why the medication was terminated; e.g. Adverse reaction, medication change, issue resolved, etc." />
      </binding>
    </element>
    <element>
      <path value="MedicationOrder.patient" />
      <short value="Who prescription is for" />
      <definition value="A link to a resource representing the person to whom the medication will be given." />
      <comments value="SubstanceAdministration-&gt;subject-&gt;Patient." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.patient" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Patient" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="PID-3-Patient ID List" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="subject.role" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="who.focus" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.prescriber" />
      <short value="Who ordered the medication(s)" />
      <definition value="The healthcare professional responsible for authorizing the prescription." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.prescriber" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-13-Ordering Provider's DEA Number / RXO-14-Ordering Provider's DEA Number / RXE-14-Pharmacist/Treatment Supplier's Verifier ID / RXO-15-Pharmacist/Treatment Supplier's Verifier ID / ORC-12-Ordering Provider / PRT-5-Participation Person: PRT-4-Participation='OP' (all but last deprecated)" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="author.role" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="who.actor" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.encounter" />
      <short value="Created during encounter/admission/stay" />
      <definition value="A link to a resource that identifies the particular occurrence of contact between patient and health care provider." />
      <comments value="SubstanceAdministration-&gt;component-&gt;EncounterEvent." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.encounter" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Encounter" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="PV1-19-Visit Number" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="componentOf.patientEncounter" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="context" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.reason[x]" />
      <short value="Reason or indication for writing the prescription" />
      <definition value="Can be the reason or the indication for writing the prescription." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.reason[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Condition" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="Codes indicating why the medication was ordered." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/condition-code" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="v2" />
        <map value="ORC-16-Order Control Code Reason /RXE-27-Give Indication/RXO-20-Indication / RXD-21-Indication / RXG-22-Indication / RXA-19-Indication" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="reason.observation or reason.observation[code=ASSERTION].value" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="why" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.note" />
      <short value="Information about the prescription" />
      <definition value="Extra information about the prescription that could not be conveyed by the other attributes." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.note" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="string" />
      </type>
      <isSummary value="true" />
    </element>
    <element>
      <path value="MedicationOrder.medicationReference" />
      <short value="Medication to be taken" />
      <definition value="Identifies the medication being administered. This is a link to a resource that represents the medication which may be the details of the medication or simply an attribute carrying a code that identifies the medication from a known list of medications." />
      <comments value="If only a code is specified, then it needs to be a code for a specific product.  If more information is required, then the use of the medication resource is recommended.  Note: do not use Medication.name to describe the prescribed medication. When the only available information is a text description of the medication, Medication.code.text should be used." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.medication[x]" />
        <min value="1" />
        <max value="1" />
      </base>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Medication" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-2-Give Code / RXO-1-Requested Give Code / RXC-2-Component Code" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="consumable.administrableMedication" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="what" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction" />
      <short value="How medication should be taken" />
      <definition value="Indicates how the medication is to be used by the patient." />
      <comments value="When the dose or rate is intended to change over the entire administration period, e.g. Tapering dose prescriptions, multiple instances of dosage instructions will need to be supplied to convey the different doses/rates. Another common example in institutional settings is 'titration' of an IV medication dose to maintain a specific stated hemodynamic value or range e.g. drug x to be administered to maintain AM (arterial mean) greater than 65." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.dosageInstruction" />
        <min value="0" />
        <max value="*" />
      </base>
      <type>
        <code value="BackboneElement" />
      </type>
      <constraint>
        <key value="mdi-mo-1" />
        <severity value="error" />
        <human value="Either additionalInstructions or timing SHALL be present." />
        <xpath value="exist(f:additionalInstructions) or exist(f:timing)" />
      </constraint>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="component.substanceAdministrationRequest" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.text" />
      <short value="Dosage instructions expressed as text" />
      <definition value="Free text dosage instructions can be used for cases where the instructions are too complex to code.  The content of this attribute does not include the name or description of the medication. When coded instructions are present, the free text instructions may still be present for display to humans taking or administering the medication. It is expected that the text instructions will always be populated.  If the dosage.timing attribute is also populated, then the dosage.text should reflect the same information as the timing." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.text" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="string" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-7.2-Provider's Administration Instructions.text / RXO-7.2-Provider's Administration Instructions.text / TQ1-10-Condition Text / TQ1-11-Text Instruction" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="text" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding" />
      <short value="Code defined by a terminology system" />
      <definition value="A reference to a code defined by a terminology system." />
      <comments value="Codes may be defined very casually in enumerations, or code lists, up to very formal definitions such as SNOMED CT - see the HL7 v3 Core Principles for more information.  Ordering of codings is undefined and SHALL NOT be used to infer meaning. Generally, at most only one of the coding values will be labelled as UserSelected = true." />
      <requirements value="Allows for translations and alternate encodings within a code system.  Also supports communication of the same instance to systems requiring different encodings." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="CodeableConcept.coding" />
        <min value="0" />
        <max value="*" />
      </base>
      <type>
        <code value="Coding" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.1-8, C*E.10-22" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="union(., ./translation)" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:CodeableConcept.coding rdfs:subPropertyOf dt:CD.coding" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding.system" />
      <short value="Identity of the terminology system" />
      <definition value="The identification of the code system that defines the meaning of the symbol in the code." />
      <comments value="The URI may be an OID (urn:oid:...) or a UUID (urn:uuid:...).  OIDs and UUIDs SHALL be references to the HL7 OID registry. Otherwise, the URI should come from HL7's list of FHIR defined special URIs or it should de-reference to some definition that establish the system clearly and unambiguously." />
      <requirements value="Need to be unambiguous about the source of the definition of the symbol." />
      <min value="0" />
      <max value="1" />
      <base>
        <path value="Coding.system" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="uri" />
      </type>
      <fixedUri value="urn:iso:std:iso:11073:10101" />
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.3" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="./codeSystem" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:Coding.system rdfs:subPropertyOf dt:CDCoding.codeSystem" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding.version" />
      <short value="Version of the system - if relevant" />
      <definition value="The version of the code system which was used when choosing this code. Note that a well-maintained code system does not need the version reported, because the meaning of codes is consistent across versions. However this cannot consistently be assured. and when the meaning is not guaranteed to be consistent, the version SHOULD be exchanged." />
      <comments value="Where the terminology does not clearly define what string should be used to identify code system versions, the recommendation is to use the date (expressed in FHIR date format) on which that version was officially published as the version date." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Coding.version" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="string" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.7" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="./codeSystemVersion" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:Coding.version rdfs:subPropertyOf dt:CDCoding.codeSystemVersion" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding.code" />
      <short value="Symbol in syntax defined by the system" />
      <definition value="A symbol in syntax defined by the system. The symbol may be a predefined code or an expression in a syntax defined by the coding system (e.g. post-coordination)." />
      <requirements value="Need to refer to a particular code in the system." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Coding.code" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="code" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.1" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="./code" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:Coding.code rdfs:subPropertyOf dt:CDCoding.code" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding.display" />
      <short value="Representation defined by the system" />
      <definition value="A representation of the meaning of the code in the system, following the rules of the system." />
      <requirements value="Need to be able to carry a human-readable meaning of the code for readers that do not know  the system." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Coding.display" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="string" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.2 - but note this is not well followed" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="CV.displayName" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:Coding.display rdfs:subPropertyOf dt:CDCoding.displayName" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.coding.userSelected" />
      <short value="If this coding was chosen directly by the user" />
      <definition value="Indicates that this coding was chosen by a user directly - i.e. off a pick list of available items (codes or displays)." />
      <comments value="Amongst a set of alternatives, a directly chosen code is the most appropriate starting point for new translations. There is some ambiguity about what exactly 'directly chosen' implies, and trading partner agreement may be needed to clarify the use of this element and its consequences more completely." />
      <requirements value="This has been identified as a clinical safety criterium - that this exact system/code pair was chosen explicitly, rather than inferred by the system based on some rules or language processing." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Coding.userSelected" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="boolean" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="Sometimes implied by being first" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="CD.codingRationale" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:Coding.userSelected fhir:mapsTo dt:CDCoding.codingRationale. fhir:Coding.userSelected fhir:hasMap fhir:Coding.userSelected.map. fhir:Coding.userSelected.map a fhir:Map;   fhir:target dt:CDCoding.codingRationale. fhir:Coding.userSelected\#true a [     fhir:source &quot;true&quot;;     fhir:target dt:CDCoding.codingRationale\#O   ]" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.additionalInstructions.text" />
      <short value="Plain text representation of the concept" />
      <definition value="A human language representation of the concept as seen/selected/uttered by the user who entered the data and/or which represents the intended meaning of the user." />
      <comments value="Very often the text is the same as a displayName of one of the codings." />
      <requirements value="The codes from the terminologies do not always capture the correct meaning with all the nuances of the human using them, or sometimes there is no appropriate code at all. In these cases, the text is used to capture the full meaning of the source." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="CodeableConcept.text" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="string" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="C*E.9. But note many systems use C*E.2 for this" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="./originalText[mediaType/code=&quot;text/plain&quot;]/data" />
      </mapping>
      <mapping>
        <identity value="orim" />
        <map value="fhir:CodeableConcept.text rdfs:subPropertyOf dt:CD.originalText" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat" />
      <short value="When the event is to occur" />
      <definition value="A set of rules that describe when the event should occur." />
      <requirements value="Many timing schedules are determined by regular repetitions." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Timing.repeat" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Element" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="Implies PIVL or EIVL" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.bounds[x]" />
      <short value="Length/Range of lengths, or (Start and/or end) limits" />
      <definition value="Either a duration for the length of the timing schedule, a range of possible length, or outer bounds for start and/or end limits of the timing schedule." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.bounds[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Quantity" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Duration" />
      </type>
      <type>
        <code value="Range" />
      </type>
      <type>
        <code value="Period" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="IVL(TS) used in a QSI" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.count" />
      <short value="Number of times to repeat" />
      <definition value="A total count of the desired number of repetitions." />
      <comments value="If you have both bounds and count, then this should be understood as within the bounds period, until count times happens." />
      <requirements value="Repetitions may be limited by end time or total occurrences." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.count" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="integer" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.count" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.duration" />
      <short value="How long when it happens" />
      <definition value="How long this thing happens for when it happens." />
      <comments value="For some events the duration is part of the definition of the event (e.g. IV infusions, where the duration is implicit in the specified quantity and rate). For others, it's part of the timing specification (e.g. exercise)." />
      <requirements value="Some activities are not instantaneous and need to be maintained for a period of time." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.duration" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="decimal" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase / EIVL.offset" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.durationMax" />
      <short value="How long when it happens (Max)" />
      <definition value="The upper limit of how long this thing happens for when it happens." />
      <comments value="For some events the duration is part of the definition of the event (e.g. IV infusions, where the duration is implicit in the specified quantity and rate). For others, it's part of the timing specification (e.g. exercise)." />
      <requirements value="Some activities are not instantaneous and need to be maintained for a period of time." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.durationMax" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="decimal" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase / EIVL.offset" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.durationUnits" />
      <short value="s | min | h | d | wk | mo | a - unit of time (UCUM)" />
      <definition value="The units of time for the duration, in UCUM units." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.durationUnits" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="code" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="required" />
        <description value="A unit of time (units from UCUM)." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/units-of-time" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase.unit" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.frequency" />
      <short value="Event occurs frequency times per period" />
      <definition value="The number of times to repeat the action within the specified period / period range (i.e. both period and periodMax provided)." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Timing.repeat.frequency" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="integer" />
      </type>
      <defaultValueInteger value="1" />
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase / EIVL.offset" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.frequencyMax" />
      <short value="Event occurs up to frequencyMax times per period" />
      <definition value="If present, indicates that the frequency is a range - so repeat between [frequency] and [frequencyMax] times within the period or period range." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.frequencyMax" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="integer" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.period" />
      <short value="Event occurs frequency times per period" />
      <definition value="Indicates the duration of time over which repetitions are to occur; e.g. to express &quot;3 times per day&quot;, 3 would be the frequency and &quot;1 day&quot; would be the period." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Timing.repeat.period" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="decimal" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.periodMax" />
      <short value="Upper limit of period (3-4 hours)" />
      <definition value="If present, indicates that the period is a range from [period] to [periodMax], allowing expressing concepts such as &quot;do this once every 3-5 days." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.periodMax" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="decimal" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.periodUnits" />
      <short value="s | min | h | d | wk | mo | a - unit of time (UCUM)" />
      <definition value="The units of time for the period in UCUM units." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="Timing.repeat.periodUnits" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="code" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="required" />
        <description value="A unit of time (units from UCUM)." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/units-of-time" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="PIVL.phase.unit" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.repeat.when" />
      <short value="Regular life events the event is tied to" />
      <definition value="A real world event that the occurrence of the event should be tied to." />
      <requirements value="Timings are frequently determined by occurrences such as waking, eating and sleep." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.repeat.when" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="code" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="required" />
        <description value="Real world event that the relating to the schedule." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/event-timing" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="EIVL.event" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.timing.code" />
      <short value="QD | QOD | Q4H | Q6H | BID | TID | QID | AM | PM +" />
      <definition value="A code for the timing pattern. Some codes such as BID are ubiquitous, but many institutions define their own additional codes." />
      <comments value="A repeat should always be defined except for the common codes BID, TID, QID, AM and PM, which all systems are required to understand." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="Timing.code" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="preferred" />
        <description value="Code for a known / defined timing pattern." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/timing-abbreviation" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="QSC.code" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.asNeeded[x]" />
      <short value="Take &quot;as needed&quot; (for x)" />
      <definition value="Indicates whether the Medication is only taken when needed within a specific dosing schedule (Boolean option), or it indicates the precondition for taking the Medication (CodeableConcept)." />
      <comments value="Specifically if 'boolean' datatype is selected, then the following logic applies:  If set to True, this indicates that the medication is only taken when needed, within the specified schedule." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.asNeeded[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="boolean" />
      </type>
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="A coded concept identifying the precondition that should be met or evaluated prior to consuming or administering a medication dose.  For example &quot;pain&quot;, &quot;30 minutes prior to sexual intercourse&quot;, &quot;on flare-up&quot; etc." />
      </binding>
      <mapping>
        <identity value="rim" />
        <map value="boolean: precondition.negationInd (inversed - so negationInd = true means asNeeded=false  CodeableConcept: precondition.observationEventCriterion[code=&quot;Assertion&quot;].value" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.site[x]" />
      <short value="Body site to administer to" />
      <definition value="A coded specification of the anatomic site where the medication first enters the body." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.site[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/BodySite" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="A coded concept describing the site location the medicine enters into or onto the body." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/approach-site-codes" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="v2" />
        <map value="RXR-2-Administration Site" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="approachSiteCode" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.route" />
      <short value="How drug should enter body" />
      <definition value="A code specifying the route or physiological path of administration of a therapeutic agent into or onto a patient's body." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.route" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="A coded concept describing the route or physiological path of administration of a therapeutic agent into or onto the body of a subject." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/route-codes" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="v2" />
        <map value="RXR-1-Route" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="routeCode" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.method" />
      <short value="Technique for administering medication" />
      <definition value="A coded value indicating the method by which the medication is introduced into or onto the body. Most commonly used for injections.  For examples, Slow Push; Deep IV." />
      <comments value="Terminologies used often pre-coordinate this term with the route and or form of administration." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.method" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="A coded concept describing the technique by which the medicine is administered." />
      </binding>
      <mapping>
        <identity value="v2" />
        <map value="RXR-4-Administration Method" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="methodCode" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.doseQuantity" />
      <short value="Amount of medication per dose" />
      <definition value="The amount of therapeutic or other substance given at one administration event." />
      <comments value="Note that this specifies the quantity of the specified medication, not the quantity for each active ingredient(s). Each ingredient amount can be communicated in the Medication resource. For example, if one wants to communicate that a tablet was 375 mg, where the dose was one tablet, you can use the Medication resource to document that the tablet was comprised of 375 mg of drug XYZ. Alternatively if the dose was 375 mg, then you may only need to use the Medication resource to indicate this was a tablet. If the example were an IV such as dopamine and you wanted to communicate that 400mg of dopamine was mixed in 500 ml of some IV solution, then this would all be communicated in the Medication resource. If the administration is not intended to be instantaneous (rate is present or timing has a duration), this can be specified to convey the total amount to be administered over the period of time as indicated by the schedule e.g. 500 ml in dose, with timing used to convey that this should be done over 4 hours." />
      <min value="1" />
      <max value="1" />
      <base>
        <path value="MedicationOrder.dosageInstruction.dose[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Quantity" />
        <profile value="http://hl7.org/fhir/StructureDefinition/SimpleQuantity" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-23-Give Rate Amount / RXE-24.1-Give Rate Units.code / RXE-24.3-Give Rate Units.name of coding system" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="doseQuantity" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dosageInstruction.rate[x]" />
      <short value="Amount of medication per unit of time" />
      <definition value="Identifies the speed with which the medication was or will be introduced into the patient. Typically the rate for an infusion e.g. 100 ml per 1 hour or 100 ml/hr.  May also be expressed as a rate per unit of time e.g. 500 ml per 2 hours.   Currently we do not specify a default of '1' in the denominator, but this is being discussed. Other examples: 200 mcg/min or 200 mcg/1 minute; 1 liter/8 hours." />
      <comments value="It is possible to supply both a rate and a doseQuantity to provide full details about how the medication is to be administered and supplied. If the rate is intended to change over time, depending on local rules/regulations, each change should be captured as a new version of the MedicationOrder with an updated rate, or captured with a new MedicationOrder with the new rate." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dosageInstruction.rate[x]" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Ratio" />
      </type>
      <type>
        <code value="Range" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="RXE-22-Give Per (Time Unit)" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="rateQuantity" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.dispenseRequest" />
      <short value="Medication supply authorization" />
      <definition value="Indicates the specific details for the dispense or medication supply part of a medication order (also known as a Medication Prescription).  Note that this information is NOT always sent with the order.  There may be in some settings (e.g. hospitals) institutional or system support for completing the dispense details in the pharmacy department." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.dispenseRequest" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="BackboneElement" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="component.supplyEvent" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.substitution" />
      <short value="Any restrictions on medication substitution" />
      <definition value="Indicates whether or not substitution can or should be part of the dispense. In some cases substitution must happen, in other cases substitution must not happen, and in others it does not matter. This block explains the prescriber's intent. If nothing is specified substitution may be done." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.substitution" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="BackboneElement" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="subjectOf.substitutionPersmission" />
      </mapping>
    </element>
    <element>
      <path value="MedicationOrder.priorPrescription" />
      <short value="An order/prescription that this supersedes" />
      <definition value="A link to a resource representing an earlier order or prescription that this order supersedes." />
      <min value="0" />
      <max value="0" />
      <base>
        <path value="MedicationOrder.priorPrescription" />
        <min value="0" />
        <max value="1" />
      </base>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/MedicationOrder" />
      </type>
      <isSummary value="true" />
    </element>
  </differential>
</StructureDefinition>